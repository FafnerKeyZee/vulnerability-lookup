{% extends "main.html" %}
{% block head %}
{{ super() }}
<script src="{{ url_for('static', filename='js/pretty-print-json.min.js') }}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/pretty-print-json.css') }}" />
{% endblock %}
{% block title %}Comment{% endblock %}
{% block content %}
<h1>{{ comment.title }}</h1>
<p>Created on {{ comment.creation_timestamp | datetimeformat }} and updated on {{ comment.timestamp | datetimeformat }}.</p>
<h2>Description</h2>
{{ description  | safe }}
<h2>Related vulnerability</h2>
<a href="{{ url_for('home_bp.vulnerability_view', vulnerability_id=comment.vulnerability) }}">{{ comment.vulnerability }}</a>
{% if comment.meta %}
<h2>Meta</h2>
<pre id="jsoncontainer">{{ comment.meta | tojson(indent=2) }}</pre>
{% endif %}
<h2>Author</h2>
<a href="{{ url_for('user_bp.profile', login=comment.author.login) }}">{{ comment.author.name }}</a>
<hr />
<div class="btn-group" role="group">
  <button id="btnGroupDropShare" type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
    Share
  </button>
  <ul class="dropdown-menu" aria-labelledby="btnGroupDropShare">
    <li><a class="dropdown-item" href="https://reddit.com/submit?url={{ url_for('comment_bp.get', comment_uuid=comment.uuid, _external=True) }}&title={{ comment.title }}" target="_blank" title="Share on Reddit">Reddit</a></li>
    <li><a class="dropdown-item" href="https://api.pinboard.in/v1/posts/add?url={{ url_for('comment_bp.get', comment_uuid=comment.uuid, _external=True) }}&description=%27{{ comment.title }}%27" target="_blank" title="Share on Pinboard">Pinboard</a></li>
    <li><a class="dropdown-item" href="https://www.newspipe.org/bookmark/bookmarklet?href={{ url_for('comment_bp.get', comment_uuid=comment.uuid, _external=True) }}&title={{ comment.title }}" target="_blank" title="Share on Newspipe">Newspipe</a></li>
  </ul>
</div>
<br /><br />
<script>
  document.addEventListener("DOMContentLoaded", function() {
    jsonContainer = document.getElementById("jsoncontainer");
    if (jsonContainer) {
      jsonContainer.innerHTML = prettyPrintJson.toHtml(JSON.parse(jsonContainer.innerText));
    }
  });
</script>
{% endblock %}
