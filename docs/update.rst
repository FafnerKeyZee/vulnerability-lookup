Updating the application
========================

All you have to do is:

.. code-block:: bash

    $ cd vulnerability-lookup/


Updating the CVE Record editor
------------------------------

We are using the `Vulnogram editor <https://github.com/Vulnogram/Vulnogram>`_.
The frontend is directly bundled in a HTML template of Vulnerability Lookup.

If you want to update the bundle you must first generate only the frontend of Vulnogram.
Follow the instructions
`here <https://github.com/Vulnogram/Vulnogram?tab=readme-ov-file#browser-mode-deployment>`_.

Then from the generated index.html file extract the part ... and copy it
in website/web/templates/vulnogram/index.html in the Jinja block ``vulnogram``.
Screenshot:

.. figure:: /_static/img/vulnogram-code.png
   :alt: Vulnogram code.
   :target: /_static/img/vulnogram-code.png

   Vulnogram code.

The headers (CSS inclusion, etc.), definition of the JSON schema is already available in the file
``bundle.html``.


The JSON schema defined in the file ``bundle.html`` is a based on the one provided in ``vulnogram``
with few minor changes:

- the format of the identifier is ``^CIRCL-SA-[0-9]{4}-[0-9]{4,19}$``
- ``additionalProperties`` is set to ``true`` for the ``cveMetadataPublished`` field. This allows us to
  store the dates of the editions in the vulnerability advisories.
